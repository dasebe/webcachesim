<html><!-- Created using the cpp_pretty_printer from the dlib C++ library.  See http://dlib.net for updates. --><head><title>dlib C++ Library - jfdctint.c</title></head><body bgcolor='white'><pre>
<font color='#009900'>/*
 * jfdctint.c
 *
 * Copyright (C) 1991-1996, Thomas G. Lane.
 * Modification developed 2003-2009 by Guido Vollbeding.
 * This file is part of the Independent JPEG Group's software.
 * For conditions of distribution and use, see the accompanying README file.
 *
 * This file contains a slow-but-accurate integer implementation of the
 * forward DCT (Discrete Cosine Transform).
 *
 * A 2-D DCT can be done by 1-D DCT on each row followed by 1-D DCT
 * on each column.  Direct algorithms are also available, but they are
 * much more complex and seem not to be any faster when reduced to code.
 *
 * This implementation is based on an algorithm described in
 *   C. Loeffler, A. Ligtenberg and G. Moschytz, "Practical Fast 1-D DCT
 *   Algorithms with 11 Multiplications", Proc. Int'l. Conf. on Acoustics,
 *   Speech, and Signal Processing 1989 (ICASSP '89), pp. 988-991.
 * The primary algorithm described there uses 11 multiplies and 29 adds.
 * We use their alternate method with 12 multiplies and 32 adds.
 * The advantage of this method is that no data path contains more than one
 * multiplication; this allows a very simple and accurate implementation in
 * scaled fixed-point arithmetic, with a minimal number of shifts.
 *
 * We also provide FDCT routines with various input sample block sizes for
 * direct resolution reduction or enlargement and for direct resolving the
 * common 2x1 and 1x2 subsampling cases without additional resampling: NxN
 * (N=1...16), 2NxN, and Nx2N (N=1...8) pixels for one 8x8 output DCT block.
 *
 * For N&lt;8 we fill the remaining block coefficients with zero.
 * For N&gt;8 we apply a partial N-point FDCT on the input samples, computing
 * just the lower 8 frequency coefficients and discarding the rest.
 *
 * We must scale the output coefficients of the N-point FDCT appropriately
 * to the standard 8-point FDCT level by 8/N per 1-D pass.  This scaling
 * is folded into the constant multipliers (pass 2) and/or final/initial
 * shifting.
 *
 * CAUTION: We rely on the FIX() macro except for the N=1,2,4,8 cases
 * since there would be too many additional constants to pre-calculate.
 */</font>

<font color='#0000FF'>#define</font> JPEG_INTERNALS
<font color='#0000FF'>#include</font> "<a style='text-decoration:none' href='jinclude.h.html'>jinclude.h</a>"
<font color='#0000FF'>#include</font> "<a style='text-decoration:none' href='jpeglib.h.html'>jpeglib.h</a>"
<font color='#0000FF'>#include</font> "<a style='text-decoration:none' href='jdct.h.html'>jdct.h</a>"		<font color='#009900'>/* Private declarations for DCT subsystem */</font>

<font color='#0000FF'>#ifdef</font> DCT_ISLOW_SUPPORTED


<font color='#009900'>/*
 * This module is specialized to the case DCTSIZE = 8.
 */</font>

<font color='#0000FF'>#if</font> DCTSIZE <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>
  Sorry, <font color='#0000FF'>this</font> code only copes with <font color='#979000'>8</font>x8 DCT blocks. <font color='#009900'>/* deliberate syntax err */</font>
<font color='#0000FF'>#endif</font>


<font color='#009900'>/*
 * The poop on this scaling stuff is as follows:
 *
 * Each 1-D DCT step produces outputs which are a factor of sqrt(N)
 * larger than the true DCT outputs.  The final outputs are therefore
 * a factor of N larger than desired; since N=8 this can be cured by
 * a simple right shift at the end of the algorithm.  The advantage of
 * this arrangement is that we save two multiplications per 1-D DCT,
 * because the y0 and y4 outputs need not be divided by sqrt(N).
 * In the IJG code, this factor of 8 is removed by the quantization step
 * (in jcdctmgr.c), NOT in this module.
 *
 * We have to do addition and subtraction of the integer inputs, which
 * is no problem, and multiplication by fractional constants, which is
 * a problem to do in integer arithmetic.  We multiply all the constants
 * by CONST_SCALE and convert them to integer constants (thus retaining
 * CONST_BITS bits of precision in the constants).  After doing a
 * multiplication we have to divide the product by CONST_SCALE, with proper
 * rounding, to produce the correct output.  This division can be done
 * cheaply as a right shift of CONST_BITS bits.  We postpone shifting
 * as long as possible so that partial sums can be added together with
 * full fractional precision.
 *
 * The outputs of the first pass are scaled up by PASS1_BITS bits so that
 * they are represented to better-than-integral precision.  These outputs
 * require BITS_IN_JSAMPLE + PASS1_BITS + 3 bits; this fits in a 16-bit word
 * with the recommended scaling.  (For 12-bit sample data, the intermediate
 * array is INT32 anyway.)
 *
 * To avoid overflow of the 32-bit intermediate results in pass 2, we must
 * have BITS_IN_JSAMPLE + CONST_BITS + PASS1_BITS &lt;= 26.  Error analysis
 * shows that the values given below are the most effective.
 */</font>

<font color='#0000FF'>#if</font> BITS_IN_JSAMPLE <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>
<font color='#0000FF'>#define</font> CONST_BITS  <font color='#979000'>13</font>
<font color='#0000FF'>#define</font> PASS1_BITS  <font color='#979000'>2</font>
<font color='#0000FF'>#else</font>
<font color='#0000FF'>#define</font> CONST_BITS  <font color='#979000'>13</font>
<font color='#0000FF'>#define</font> PASS1_BITS  <font color='#979000'>1</font>		<font color='#009900'>/* lose a little precision to avoid overflow */</font>
<font color='#0000FF'>#endif</font>

<font color='#009900'>/* Some C compilers fail to reduce "FIX(constant)" at compile time, thus
 * causing a lot of useless floating-point operations at run time.
 * To get around this we use the following pre-calculated constants.
 * If you change CONST_BITS you may want to add appropriate values.
 * (With a reasonable C compiler, you can just rely on the FIX() macro...)
 */</font>

<font color='#0000FF'>#if</font> CONST_BITS <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>13</font>
<font color='#0000FF'>#define</font> FIX_0_298631336  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>2446</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.298631336) */</font>
<font color='#0000FF'>#define</font> FIX_0_390180644  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>3196</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.390180644) */</font>
<font color='#0000FF'>#define</font> FIX_0_541196100  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>4433</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.541196100) */</font>
<font color='#0000FF'>#define</font> FIX_0_765366865  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>6270</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.765366865) */</font>
<font color='#0000FF'>#define</font> FIX_0_899976223  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>7373</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.899976223) */</font>
<font color='#0000FF'>#define</font> FIX_1_175875602  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>9633</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(1.175875602) */</font>
<font color='#0000FF'>#define</font> FIX_1_501321110  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>12299</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(1.501321110) */</font>
<font color='#0000FF'>#define</font> FIX_1_847759065  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>15137</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(1.847759065) */</font>
<font color='#0000FF'>#define</font> FIX_1_961570560  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>16069</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(1.961570560) */</font>
<font color='#0000FF'>#define</font> FIX_2_053119869  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>16819</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(2.053119869) */</font>
<font color='#0000FF'>#define</font> FIX_2_562915447  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>20995</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(2.562915447) */</font>
<font color='#0000FF'>#define</font> FIX_3_072711026  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>25172</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(3.072711026) */</font>
<font color='#0000FF'>#else</font>
<font color='#0000FF'>#define</font> FIX_0_298631336  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.298631336</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_0_390180644  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.390180644</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_0_541196100  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.541196100</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_0_765366865  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.765366865</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_0_899976223  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.899976223</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_1_175875602  FIX<font face='Lucida Console'>(</font><font color='#979000'>1.175875602</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_1_501321110  FIX<font face='Lucida Console'>(</font><font color='#979000'>1.501321110</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_1_847759065  FIX<font face='Lucida Console'>(</font><font color='#979000'>1.847759065</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_1_961570560  FIX<font face='Lucida Console'>(</font><font color='#979000'>1.961570560</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_2_053119869  FIX<font face='Lucida Console'>(</font><font color='#979000'>2.053119869</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_2_562915447  FIX<font face='Lucida Console'>(</font><font color='#979000'>2.562915447</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_3_072711026  FIX<font face='Lucida Console'>(</font><font color='#979000'>3.072711026</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#endif</font>


<font color='#009900'>/* Multiply an INT32 variable by an INT32 constant to yield an INT32 result.
 * For 8-bit samples with the recommended scaling, all the variable
 * and constant values involved are no more than 16 bits wide, so a
 * 16x16-&gt;32 bit multiply can be used instead of a full 32x32 multiply.
 * For 12-bit samples, a full 32-bit multiplication will be needed.
 */</font>

<font color='#0000FF'>#if</font> BITS_IN_JSAMPLE <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>
<font color='#0000FF'>#define</font> MULTIPLY<font face='Lucida Console'>(</font>var,<font color='#0000FF'>const</font><font face='Lucida Console'>)</font>  MULTIPLY16C16<font face='Lucida Console'>(</font>var,<font color='#0000FF'>const</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#else</font>
<font color='#0000FF'>#define</font> MULTIPLY<font face='Lucida Console'>(</font>var,<font color='#0000FF'>const</font><font face='Lucida Console'>)</font>  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>var<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> <font face='Lucida Console'>(</font><font color='#0000FF'>const</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#endif</font>


<font color='#009900'>/*
 * Perform the forward DCT on one block of samples.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_islow'></a>jpeg_fdct_islow</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3;
  INT32 tmp10, tmp11, tmp12, tmp13;
  INT32 z1;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> DCTSIZE; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part per LL&amp;M figure 1 --- note that published figure is faulty;
     * rotator "sqrt(2)*c1" should be "sqrt(2)*c6".
     */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>-</font> <font color='#979000'>8</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, FIX_0_541196100<font face='Lucida Console'>)</font>;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, FIX_0_765366865<font face='Lucida Console'>)</font>,
				       CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, FIX_1_847759065<font face='Lucida Console'>)</font>,
				       CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part per figure 8 --- note paper omits factor of sqrt(2).
     * cK represents sqrt(2) * cos(K*pi/16).
     * i0..i3 in the paper are tmp0..tmp3 here.
     */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/*  c3 */</font>
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    tmp0  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0,    FIX_1_501321110<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3-c5-c7 */</font>
    tmp1  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1,    FIX_3_072711026<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3+c5-c7 */</font>
    tmp2  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2,    FIX_2_053119869<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3-c5+c7 */</font>
    tmp3  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3,    FIX_0_298631336<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1+c3+c5-c7 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c7-c3 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1-c3 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c5-c3 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c3-c5 */</font>

    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part per LL&amp;M figure 1 --- note that published figure is faulty;
     * rotator "sqrt(2)*c1" should be "sqrt(2)*c6".
     */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11, PASS1_BITS<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, FIX_0_541196100<font face='Lucida Console'>)</font>;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, FIX_0_765366865<font face='Lucida Console'>)</font>, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, FIX_1_847759065<font face='Lucida Console'>)</font>, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part per figure 8 --- note paper omits factor of sqrt(2).
     * cK represents sqrt(2) * cos(K*pi/16).
     * i0..i3 in the paper are tmp0..tmp3 here.
     */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/*  c3 */</font>
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    tmp0  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0,    FIX_1_501321110<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3-c5-c7 */</font>
    tmp1  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1,    FIX_3_072711026<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3+c5-c7 */</font>
    tmp2  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2,    FIX_2_053119869<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3-c5+c7 */</font>
    tmp3  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3,    FIX_0_298631336<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1+c3+c5-c7 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c7-c3 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1-c3 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c5-c3 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c3-c5 */</font>

    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>

<font color='#0000FF'>#ifdef</font> DCT_SCALING_SUPPORTED


<font color='#009900'>/*
 * Perform the forward DCT on a 7x7 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_7x7'></a>jpeg_fdct_7x7</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3;
  INT32 tmp10, tmp11, tmp12;
  INT32 z1, z2, z3;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/14). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>7</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font> <font color='#979000'>7</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp3;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp3;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp3;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.353553391</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                <font color='#009900'>/* (c2+c6-c4)/2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.920609002</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* (c2+c4-c6)/2 */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.314692123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c6 */</font>
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2 <font color='#5555FF'>+</font> z3, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881747734</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c4 */</font>
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c2+c6-c4 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.935414347</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* (c3+c1-c5)/2 */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.170262339</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* (c3+c5-c1)/2 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp2;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp12, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.378756276</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c1 */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp2;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.613604268</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp3;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.870828693</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3+c1-c5 */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/7)**2 = 64/49, which we fold
   * into the constant multipliers:
   * cK now represents sqrt(2) * cos(K*pi/14) * 64/49.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>7</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];

    tmp10 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp11 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp12 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];

    z1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306122449</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* 64/49 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp3;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp3;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp3;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.461784020</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                <font color='#009900'>/* (c2+c6-c4)/2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.202428084</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* (c2+c4-c6)/2 */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.411026446</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c6 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2 <font color='#5555FF'>+</font> z3, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.151670509</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c4 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.923568041</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c2+c6-c4 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.221765677</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* (c3+c1-c5)/2 */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.222383464</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* (c3+c5-c1)/2 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp2;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp12, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.800824523</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c1 */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp2;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.801442310</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp3;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.443531355</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3+c1-c5 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp2, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 6x6 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_6x6'></a>jpeg_fdct_6x6</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2;
  INT32 tmp10, tmp11, tmp12;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/12). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>6</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>-</font> <font color='#979000'>6</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,                 <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c4 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,     <font color='#009900'>/* c5 */</font>
		    CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>-</font> tmp1<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/6)**2 = 16/9, which we fold
   * into the constant multipliers:
   * cK now represents sqrt(2) * cos(K*pi/12) * 16/9.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>6</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp11 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.177324216</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,                 <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.257078722</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c4 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.650711829</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c5 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,   <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,    <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,   <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 5x5 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_5x5'></a>jpeg_fdct_5x5</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2;
  INT32 tmp10, tmp11;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* We scale the results further by 2 as part of output adaption */</font>
  <font color='#009900'>/* scaling for different DCT size. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/10). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>5</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp1;
    tmp11 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp1;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>-</font> <font color='#979000'>5</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.790569415</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* (c2+c4)/2 */</font>
    tmp10 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.353553391</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* (c2-c4)/2 */</font>
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c3 */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c1-c3 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c1+c3 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/5)**2 = 64/25, which we partially
   * fold into the constant multipliers (other part was done in pass 1):
   * cK now represents sqrt(2) * cos(K*pi/10) * 32/25.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>5</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp1;
    tmp11 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp1;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.28</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* 32/25 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.011928851</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* (c2+c4)/2 */</font>
    tmp10 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.452548340</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* (c2-c4)/2 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.064004961</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c3 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.657591230</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c1-c3 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.785601151</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c1+c3 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 4x4 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_4x4'></a>jpeg_fdct_4x4</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1;
  INT32 tmp10, tmp11;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* We must also scale the output by (8/4)**2 = 2**2, which we add here. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/16) [refers to 8-point FDCT]. */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>4</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>-</font> <font color='#979000'>4</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, FIX_0_541196100<font face='Lucida Console'>)</font>;       <font color='#009900'>/* c6 */</font>
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>;

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, FIX_0_765366865<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2-c6 */</font>
		  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, FIX_1_847759065<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2+c6 */</font>
		  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>4</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];

    tmp10 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp11 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1, PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, FIX_0_541196100<font face='Lucida Console'>)</font>;       <font color='#009900'>/* c6 */</font>
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, FIX_0_765366865<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2-c6 */</font>
		  CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, FIX_1_847759065<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2+c6 */</font>
		  CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 3x3 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_3x3'></a>jpeg_fdct_3x3</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* We scale the results further by 2**2 as part of output adaption */</font>
  <font color='#009900'>/* scaling for different DCT size. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/6). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>3</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;

    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>-</font> <font color='#979000'>3</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,               <font color='#009900'>/* c1 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/3)**2 = 64/9, which we partially
   * fold into the constant multipliers (other part was done in pass 1):
   * cK now represents sqrt(2) * cos(K*pi/6) * 16/9.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>3</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];

    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.257078722</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.177324216</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,               <font color='#009900'>/* c1 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 2x2 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_2x2'></a>jpeg_fdct_2x2</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3;
  JSAMPROW elemptr;

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT. */</font>

  <font color='#009900'>/* Row 0 */</font>
  elemptr <font color='#5555FF'>=</font> sample_data[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> start_col;

  tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
  tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Row 1 */</font>
  elemptr <font color='#5555FF'>=</font> sample_data[<font color='#979000'>1</font>] <font color='#5555FF'>+</font> start_col;

  tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
  tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 2: process columns.
   * We leave the results scaled up by an overall factor of 8.
   * We must also scale the output by (8/2)**2 = 2**4.
   */</font>

  <font color='#009900'>/* Column 0 */</font>
  <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
  data[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>-</font> <font color='#979000'>4</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>4</font><font face='Lucida Console'>)</font>;
  data[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>4</font><font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Column 1 */</font>
  data[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font><font color='#5555FF'>+</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>4</font><font face='Lucida Console'>)</font>;
  data[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font><font color='#5555FF'>+</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>4</font><font face='Lucida Console'>)</font>;
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 1x1 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_1x1'></a>jpeg_fdct_1x1</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* We leave the result scaled up by an overall factor of 8. */</font>
  <font color='#009900'>/* We must also scale the output by (8/1)**2 = 2**6. */</font>
  <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
  data[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
    <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>sample_data[<font color='#979000'>0</font>][start_col]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>6</font><font face='Lucida Console'>)</font>;
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 9x9 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_9x9'></a>jpeg_fdct_9x9</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4;
  INT32 tmp10, tmp11, tmp12, tmp13;
  INT32 z1, z2;
  DCTELEM workspace[<font color='#979000'>8</font>];
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  DCTELEM <font color='#5555FF'>*</font>wsptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* we scale the results further by 2 as part of output adaption */</font>
  <font color='#009900'>/* scaling for different DCT size. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/18). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>;;<font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3;
    z2 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp4;
    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2 <font color='#5555FF'>-</font> <font color='#979000'>9</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c6 */</font>
	      CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.328926049</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp4 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c6 */</font>
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.083350441</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>    <font color='#009900'>/* c4 */</font>
	      <font color='#5555FF'>+</font> z1 <font color='#5555FF'>+</font> z2, CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>-</font> tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.245575608</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>    <font color='#009900'>/* c8 */</font>
	      <font color='#5555FF'>+</font> z1 <font color='#5555FF'>-</font> z2, CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c3 */</font>
	      CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c3 */</font>
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.909038955</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c5 */</font>
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.483689525</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c7 */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp0 <font color='#5555FF'>+</font> tmp1, CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.392728481</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1 */</font>

    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp2, CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>+</font> tmp2, CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> DCTSIZE<font face='Lucida Console'>)</font> <b>{</b>
      <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>9</font><font face='Lucida Console'>)</font>
	<font color='#0000FF'>break</font>;			<font color='#009900'>/* Done. */</font>
      dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;	<font color='#009900'>/* advance pointer to next row */</font>
    <b>}</b> <font color='#0000FF'>else</font>
      dataptr <font color='#5555FF'>=</font> workspace;	<font color='#009900'>/* switch pointer to extended workspace */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We leave the results scaled up by an overall factor of 8.
   * We must also scale the output by (8/9)**2 = 64/81, which we partially
   * fold into the constant multipliers and final/initial shifting:
   * cK now represents sqrt(2) * cos(K*pi/18) * 128/81.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];

    tmp10 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp11 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp12 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp13 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];

    z1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3;
    z2 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp4;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.580246914</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,       <font color='#009900'>/* 128/81 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.117403309</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c6 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.100031287</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp4 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.117403309</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c6 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.711961190</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>    <font color='#009900'>/* c4 */</font>
	      <font color='#5555FF'>+</font> z1 <font color='#5555FF'>+</font> z2, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>-</font> tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.388070096</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>    <font color='#009900'>/* c8 */</font>
	      <font color='#5555FF'>+</font> z1 <font color='#5555FF'>-</font> z2, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.935399303</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c3 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.935399303</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c3 */</font>
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.436506004</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c5 */</font>
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.764348879</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c7 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp0 <font color='#5555FF'>+</font> tmp1, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.200854883</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp2, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>+</font> tmp2, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 10x10 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_10x10'></a>jpeg_fdct_10x10</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14;
  DCTELEM workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>];
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  DCTELEM <font color='#5555FF'>*</font>wsptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* we scale the results further by 2 as part of output adaption */</font>
  <font color='#009900'>/* scaling for different DCT size. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/20). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>;;<font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp4;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp4;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    tmp14 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font> <font color='#979000'>10</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp12;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.144122806</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* c4 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.437016024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c8 */</font>
	      CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c2-c6 */</font>
	      CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c2+c6 */</font>
	      CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp4;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.396802247</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>          <font color='#009900'>/* c1 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.260073511</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font>   <font color='#009900'>/* c3 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.642039522</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>          <font color='#009900'>/* c7 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.221231742</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,           <font color='#009900'>/* c9 */</font>
	      CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.951056516</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>     <font color='#009900'>/* (c3+c7)/2 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.587785252</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* (c1-c9)/2 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.309016994</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>   <font color='#009900'>/* (c3-c7)/2 */</font>
	    <font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS <font color='#5555FF'>-</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp2;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> DCTSIZE<font face='Lucida Console'>)</font> <b>{</b>
      <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>10</font><font face='Lucida Console'>)</font>
	<font color='#0000FF'>break</font>;			<font color='#009900'>/* Done. */</font>
      dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;	<font color='#009900'>/* advance pointer to next row */</font>
    <b>}</b> <font color='#0000FF'>else</font>
      dataptr <font color='#5555FF'>=</font> workspace;	<font color='#009900'>/* switch pointer to extended workspace */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We leave the results scaled up by an overall factor of 8.
   * We must also scale the output by (8/10)**2 = 16/25, which we partially
   * fold into the constant multipliers and final/initial shifting:
   * cK now represents sqrt(2) * cos(K*pi/20) * 32/25.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp12 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp4;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp4;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    tmp14 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.28</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* 32/25 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp12;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.464477191</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* c4 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.559380511</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c8 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.064004961</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.657591230</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c2-c6 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.785601151</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c2+c6 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp4;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.28</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* 32/25 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.28</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                     <font color='#009900'>/* 32/25 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.787906876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>          <font color='#009900'>/* c1 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.612894094</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font>   <font color='#009900'>/* c3 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.821810588</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>          <font color='#009900'>/* c7 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.283176630</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,           <font color='#009900'>/* c9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.217352341</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>     <font color='#009900'>/* (c3+c7)/2 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.752365123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* (c1-c9)/2 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.395541753</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>   <font color='#009900'>/* (c3-c7)/2 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.64</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp2;            <font color='#009900'>/* 16/25 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on an 11x11 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_11x11'></a>jpeg_fdct_11x11</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14;
  INT32 z1, z2, z3;
  DCTELEM workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>];
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  DCTELEM <font color='#5555FF'>*</font>wsptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* we scale the results further by 2 as part of output adaption */</font>
  <font color='#009900'>/* scaling for different DCT size. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/22). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>;;<font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>+</font> tmp4 <font color='#5555FF'>+</font> tmp5 <font color='#5555FF'>-</font> <font color='#979000'>11</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp5;
    tmp0 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp5;
    tmp1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp5;
    tmp2 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp5;
    tmp3 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp5;
    tmp4 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp5;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.356927976</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>       <font color='#009900'>/* c2 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.201263574</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c10 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.926112931</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c6 */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.189712156</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c4 */</font>
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.018300590</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c2+c8-c6 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.390975730</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c4+c10 */</font>
	      CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.062335650</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c4-c6-c10 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.356927976</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>         <font color='#009900'>/* c2 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.587485545</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c8 */</font>
	      CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.620527200</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c2+c4-c6 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.788749120</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c8+c10 */</font>
	      CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.286413905</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c3 */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.068791298</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c5 */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.764581576</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c7 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.719967871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c7+c5+c3-c1 */</font>
	   <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.398430003</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c9 */</font>
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp12, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.764581576</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* -c7 */</font>
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp13, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.399818907</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* -c1 */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp4 <font color='#5555FF'>+</font> tmp5 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.276416582</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c9+c7+c1-c3 */</font>
	    <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.068791298</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c5 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.398430003</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c9 */</font>
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp4 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.989053629</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c9+c5+c3-c7 */</font>
	    <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.399818907</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c1 */</font>
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp5 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.305598626</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c1+c5-c9-c7 */</font>
	    <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.286413905</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c3 */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0, CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1, CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp2, CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp3, CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> DCTSIZE<font face='Lucida Console'>)</font> <b>{</b>
      <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>11</font><font face='Lucida Console'>)</font>
	<font color='#0000FF'>break</font>;			<font color='#009900'>/* Done. */</font>
      dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;	<font color='#009900'>/* advance pointer to next row */</font>
    <b>}</b> <font color='#0000FF'>else</font>
      dataptr <font color='#5555FF'>=</font> workspace;	<font color='#009900'>/* switch pointer to extended workspace */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We leave the results scaled up by an overall factor of 8.
   * We must also scale the output by (8/11)**2 = 64/121, which we partially
   * fold into the constant multipliers and final/initial shifting:
   * cK now represents sqrt(2) * cos(K*pi/22) * 128/121.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];

    tmp10 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp11 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp12 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp13 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp14 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>+</font> tmp4 <font color='#5555FF'>+</font> tmp5,
		       <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.057851240</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,                <font color='#009900'>/* 128/121 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp5;
    tmp0 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp5;
    tmp1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp5;
    tmp2 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp5;
    tmp3 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp5;
    tmp4 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp5;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.435427942</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>       <font color='#009900'>/* c2 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.212906922</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c10 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.979689713</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c6 */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.258538479</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c4 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.077210542</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c2+c8-c6 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.471445400</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c4+c10 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.065941844</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c4-c6-c10 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.435427942</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>         <font color='#009900'>/* c2 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.621472312</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c8 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.714276708</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c2+c4-c6 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.834379234</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c8+c10 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.360834544</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c3 */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.130622199</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c5 */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.808813568</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c7 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.819470145</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c7+c5+c3-c1 */</font>
	   <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.421479672</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c9 */</font>
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp12, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.808813568</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* -c7 */</font>
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp13, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.480800167</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* -c1 */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp4 <font color='#5555FF'>+</font> tmp5 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.350258864</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c9+c7+c1-c3 */</font>
	    <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.130622199</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c5 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.421479672</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c9 */</font>
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp4 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.104122847</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c9+c5+c3-c7 */</font>
	    <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.480800167</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c1 */</font>
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp5 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.381129125</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c1+c5-c9-c7 */</font>
	    <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.360834544</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c3 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp2, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp3, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 12x12 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_12x12'></a>jpeg_fdct_12x12</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15;
  DCTELEM workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>];
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  DCTELEM <font color='#5555FF'>*</font>wsptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/24). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>;;<font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp5;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp5;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp4;
    tmp14 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp4;
    tmp12 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp3;
    tmp15 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp3;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font> <font color='#979000'>12</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp14 <font color='#5555FF'>-</font> tmp15<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c4 */</font>
	      CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>-</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp4, FIX_0_541196100<font face='Lucida Console'>)</font>;    <font color='#009900'>/* c9 */</font>
    tmp14 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, FIX_0_765366865<font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3-c9 */</font>
    tmp15 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, FIX_1_847759065<font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3+c9 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.121971054</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.860918669</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c7 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>+</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.580774953</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c5+c7-c1 */</font>
	    <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.184591911</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c11 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.184591911</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c11 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp15 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.339493912</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c1+c5-c11 */</font>
	    <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.860918669</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c7 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp14 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.725788011</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c1+c11-c7 */</font>
	    <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.121971054</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c5 */</font>
    tmp11 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c3 */</font>
	    <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp5, FIX_0_541196100<font face='Lucida Console'>)</font>;  <font color='#009900'>/* c9 */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10, CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11, CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12, CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp13, CONST_BITS<font face='Lucida Console'>)</font>;

    ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> DCTSIZE<font face='Lucida Console'>)</font> <b>{</b>
      <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>12</font><font face='Lucida Console'>)</font>
	<font color='#0000FF'>break</font>;			<font color='#009900'>/* Done. */</font>
      dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;	<font color='#009900'>/* advance pointer to next row */</font>
    <b>}</b> <font color='#0000FF'>else</font>
      dataptr <font color='#5555FF'>=</font> workspace;	<font color='#009900'>/* switch pointer to extended workspace */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We leave the results scaled up by an overall factor of 8.
   * We must also scale the output by (8/12)**2 = 4/9, which we partially
   * fold into the constant multipliers and final shifting:
   * cK now represents sqrt(2) * cos(K*pi/24) * 8/9.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp5;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp5;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp4;
    tmp14 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp4;
    tmp12 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp3;
    tmp15 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp3;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.888888889</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* 8/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp14 <font color='#5555FF'>-</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.888888889</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* 8/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.088662108</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c4 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>-</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.888888889</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>        <font color='#009900'>/* 8/9 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.214244803</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.481063200</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c9 */</font>
    tmp14 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.680326102</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c3-c9 */</font>
    tmp15 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.642452502</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c3+c9 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.997307603</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.765261039</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c7 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>+</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.516244403</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c5+c7-c1 */</font>
	    <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.164081699</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c11 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.164081699</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c11 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp15 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.079550144</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c1+c5-c11 */</font>
	    <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.765261039</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c7 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp14 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.645144899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c1+c11-c7 */</font>
	    <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.997307603</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c5 */</font>
    tmp11 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.161389302</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c3 */</font>
	    <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.481063200</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c9 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp13, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 13x13 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_13x13'></a>jpeg_fdct_13x13</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5, tmp6;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15;
  INT32 z1, z2;
  DCTELEM workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>];
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  DCTELEM <font color='#5555FF'>*</font>wsptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/26). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>;;<font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>12</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp6 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>12</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>+</font> tmp4 <font color='#5555FF'>+</font> tmp5 <font color='#5555FF'>+</font> tmp6 <font color='#5555FF'>-</font> <font color='#979000'>13</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font>;
    tmp6 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp6;
    tmp0 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp6;
    tmp1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp6;
    tmp2 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp6;
    tmp3 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp6;
    tmp4 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp6;
    tmp5 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp6;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.373119086</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>   <font color='#009900'>/* c2 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.058554052</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>   <font color='#009900'>/* c6 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.501487041</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>   <font color='#009900'>/* c10 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.170464608</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>   <font color='#009900'>/* c12 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.803364869</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>   <font color='#009900'>/* c8 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.252223920</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,    <font color='#009900'>/* c4 */</font>
	      CONST_BITS<font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.155388986</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* (c4+c6)/2 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.435816023</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* (c2-c10)/2 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.316450131</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* (c8-c12)/2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.096834934</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* (c4-c6)/2 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>+</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.937303064</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#009900'>/* (c2+c10)/2 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.486914739</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* (c8+c12)/2 */</font>

    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, CONST_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.322312651</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3 */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.163874945</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.937797057</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>  <font color='#009900'>/* c7 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>+</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.338443458</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c11 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.020082300</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>          <font color='#009900'>/* c3+c5+c7-c1 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.318774355</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c9-c11 */</font>
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>-</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.937797057</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>  <font color='#009900'>/* c7 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.338443458</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c11 */</font>
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp13, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.163874945</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c5 */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp4 <font color='#5555FF'>+</font> tmp5 <font color='#5555FF'>+</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.837223564</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>         <font color='#009900'>/* c5+c9+c11-c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.341699410</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c1+c7 */</font>
    tmp6 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.657217813</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c9 */</font>
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp4 <font color='#5555FF'>+</font> tmp6 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.572116027</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c1+c5-c9-c11 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.260109708</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c3+c7 */</font>
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp5 <font color='#5555FF'>+</font> tmp6 <font color='#5555FF'>+</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.205608352</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>         <font color='#009900'>/* c3+c5+c9-c7 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.742345811</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c1+c11 */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0, CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1, CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp2, CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp3, CONST_BITS<font face='Lucida Console'>)</font>;

    ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> DCTSIZE<font face='Lucida Console'>)</font> <b>{</b>
      <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>13</font><font face='Lucida Console'>)</font>
	<font color='#0000FF'>break</font>;			<font color='#009900'>/* Done. */</font>
      dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;	<font color='#009900'>/* advance pointer to next row */</font>
    <b>}</b> <font color='#0000FF'>else</font>
      dataptr <font color='#5555FF'>=</font> workspace;	<font color='#009900'>/* switch pointer to extended workspace */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We leave the results scaled up by an overall factor of 8.
   * We must also scale the output by (8/13)**2 = 64/169, which we partially
   * fold into the constant multipliers and final shifting:
   * cK now represents sqrt(2) * cos(K*pi/26) * 128/169.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp6 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];

    tmp10 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp11 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp12 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp13 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp14 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp15 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>+</font> tmp4 <font color='#5555FF'>+</font> tmp5 <font color='#5555FF'>+</font> tmp6,
		       <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.757396450</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,          <font color='#009900'>/* 128/169 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp6 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp6;
    tmp0 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp6;
    tmp1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp6;
    tmp2 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp6;
    tmp3 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp6;
    tmp4 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp6;
    tmp5 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp6;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.039995521</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>   <font color='#009900'>/* c2 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.801745081</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>   <font color='#009900'>/* c6 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.379824504</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>   <font color='#009900'>/* c10 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.129109289</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>   <font color='#009900'>/* c12 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.608465700</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>   <font color='#009900'>/* c8 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.948429952</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,    <font color='#009900'>/* c4 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.875087516</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* (c4+c6)/2 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.330085509</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* (c2-c10)/2 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.239678205</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* (c8-c12)/2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.073342435</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* (c4-c6)/2 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>+</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.709910013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#009900'>/* (c2+c10)/2 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.368787494</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* (c8+c12)/2 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.001514908</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3 */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881514751</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.710284161</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>  <font color='#009900'>/* c7 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>+</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.256335874</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c11 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.530003162</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>          <font color='#009900'>/* c3+c5+c7-c1 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.241438564</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c9-c11 */</font>
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>-</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.710284161</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>  <font color='#009900'>/* c7 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.256335874</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c11 */</font>
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp13, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881514751</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c5 */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp4 <font color='#5555FF'>+</font> tmp5 <font color='#5555FF'>+</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.634110155</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>         <font color='#009900'>/* c5+c9+c11-c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.773594819</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c1+c7 */</font>
    tmp6 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.497774438</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c9 */</font>
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp4 <font color='#5555FF'>+</font> tmp6 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.190715098</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c1+c5-c9-c11 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.711799069</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c3+c7 */</font>
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp5 <font color='#5555FF'>+</font> tmp6 <font color='#5555FF'>+</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.670519935</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>         <font color='#009900'>/* c3+c5+c9-c7 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.319646532</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c1+c11 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp2, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp3, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 14x14 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_14x14'></a>jpeg_fdct_14x14</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5, tmp6;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15, tmp16;
  DCTELEM workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>];
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  DCTELEM <font color='#5555FF'>*</font>wsptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/28). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>;;<font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>13</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>12</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp6 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp6;
    tmp14 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp6;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp5;
    tmp15 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp5;
    tmp12 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp4;
    tmp16 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp4;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>13</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>12</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp6 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font> <font color='#979000'>14</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.274162392</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#009900'>/* c4 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.314692123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* c12 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881747734</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c8 */</font>
	      CONST_BITS<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>+</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.105676686</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>

    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.273079590</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c2-c6 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.613604268</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c10 */</font>
	      CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.719280954</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c6+c10 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.378756276</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp11 <font color='#5555FF'>=</font> tmp5 <font color='#5555FF'>-</font> tmp4;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp6<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.158341681</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* -c13 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.405321284</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;            <font color='#009900'>/* c1 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.197448846</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>     <font color='#009900'>/* c5 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4 <font color='#5555FF'>+</font> tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.752406978</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c9 */</font>
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.373959773</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c3+c5-c13 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.119999435</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c1+c11-c9 */</font>
	      CONST_BITS<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.334852607</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>     <font color='#009900'>/* c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>-</font> tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.467085129</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c11 */</font>
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.424103948</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c3-c9-c13 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>3.069855259</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c1+c5+c11 */</font>
	      CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>+</font> tmp6 <font color='#5555FF'>-</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.126980169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,    <font color='#009900'>/* c3+c5-c1 */</font>
	      CONST_BITS<font face='Lucida Console'>)</font>;

    ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> DCTSIZE<font face='Lucida Console'>)</font> <b>{</b>
      <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>14</font><font face='Lucida Console'>)</font>
	<font color='#0000FF'>break</font>;			<font color='#009900'>/* Done. */</font>
      dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;	<font color='#009900'>/* advance pointer to next row */</font>
    <b>}</b> <font color='#0000FF'>else</font>
      dataptr <font color='#5555FF'>=</font> workspace;	<font color='#009900'>/* switch pointer to extended workspace */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We leave the results scaled up by an overall factor of 8.
   * We must also scale the output by (8/14)**2 = 16/49, which we partially
   * fold into the constant multipliers and final shifting:
   * cK now represents sqrt(2) * cos(K*pi/28) * 32/49.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp13 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp6 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp6;
    tmp14 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp6;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp5;
    tmp15 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp5;
    tmp12 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp4;
    tmp16 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp4;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp6 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13,
		       <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.653061224</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,                 <font color='#009900'>/* 32/49 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.832106052</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#009900'>/* c4 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.205513223</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* c12 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.575835255</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c8 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>+</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.722074570</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.178337691</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c2-c6 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.400721155</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c10 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.122795725</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c6+c10 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.900412262</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp11 <font color='#5555FF'>=</font> tmp5 <font color='#5555FF'>-</font> tmp4;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp6,
		       <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.653061224</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,                 <font color='#009900'>/* 32/49 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp3  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3 , <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.653061224</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;            <font color='#009900'>/* 32/49 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.103406812</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* -c13 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.917760839</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;            <font color='#009900'>/* c1 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.782007410</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>     <font color='#009900'>/* c5 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4 <font color='#5555FF'>+</font> tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.491367823</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c9 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.550341076</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c3+c5-c13 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.731428202</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c1+c11-c9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.871740478</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>     <font color='#009900'>/* c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>-</font> tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.305035186</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c11 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.276965844</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c3-c9-c13 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.004803435</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c1+c5+c11 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp3
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.735987049</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>          <font color='#009900'>/* c3+c5-c1 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.082925825</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c9-c11-c13 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 15x15 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_15x15'></a>jpeg_fdct_15x15</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15, tmp16;
  INT32 z1, z2, z3;
  DCTELEM workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>7</font>];
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  DCTELEM <font color='#5555FF'>*</font>wsptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/30). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>;;<font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>14</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>13</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>12</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp6 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp7 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>14</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>13</font>]<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>12</font>]<font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp16 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp4 <font color='#5555FF'>+</font> tmp5;
    z2 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>+</font> tmp6;
    z3 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp7;
    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>-</font> <font color='#979000'>15</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z3;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.144122806</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* c6 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.437016024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c12 */</font>
	      CONST_BITS<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp4<font face='Lucida Console'>)</font> <font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp7 <font color='#5555FF'>-</font> tmp7;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.531135173</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>  <font color='#009900'>/* c2+c14 */</font>
         <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.238241955</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c4+c8 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.798468008</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>  <font color='#009900'>/* c8-c14 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.091361227</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c2-c4 */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.383309603</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>  <font color='#009900'>/* c2 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6 <font color='#5555FF'>-</font> tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.946293579</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>  <font color='#009900'>/* c8 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.790569415</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* (c6+c12)/2 */</font>

    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, CONST_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> tmp13 <font color='#5555FF'>+</font> tmp15 <font color='#5555FF'>+</font> tmp16,
		    <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                         <font color='#009900'>/* c5 */</font>
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp14 <font color='#5555FF'>-</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.344997024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#009900'>/* c3 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp13 <font color='#5555FF'>-</font> tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c9 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c5 */</font>
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.406466353</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c1 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.344997024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c3 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.575212477</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c11 */</font>
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.475753014</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>                 <font color='#009900'>/* c7-c11 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>                 <font color='#009900'>/* c3-c9 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.700497885</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp4 <font color='#5555FF'>+</font> tmp12;   <font color='#009900'>/* c1+c13 */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.355500862</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>               <font color='#009900'>/* -(c1-c7) */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>                 <font color='#009900'>/* c3+c9 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.869244010</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp4 <font color='#5555FF'>-</font> tmp12;   <font color='#009900'>/* c11+c13 */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0, CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1, CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp2, CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp3, CONST_BITS<font face='Lucida Console'>)</font>;

    ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> DCTSIZE<font face='Lucida Console'>)</font> <b>{</b>
      <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>15</font><font face='Lucida Console'>)</font>
	<font color='#0000FF'>break</font>;			<font color='#009900'>/* Done. */</font>
      dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;	<font color='#009900'>/* advance pointer to next row */</font>
    <b>}</b> <font color='#0000FF'>else</font>
      dataptr <font color='#5555FF'>=</font> workspace;	<font color='#009900'>/* switch pointer to extended workspace */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We leave the results scaled up by an overall factor of 8.
   * We must also scale the output by (8/15)**2 = 64/225, which we partially
   * fold into the constant multipliers and final shifting:
   * cK now represents sqrt(2) * cos(K*pi/30) * 256/225.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp6 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp7 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];

    tmp10 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp11 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp12 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp13 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp14 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp15 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp16 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];

    z1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp4 <font color='#5555FF'>+</font> tmp5;
    z2 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>+</font> tmp6;
    z3 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp7;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.137777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* 256/225 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z3;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.301757503</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* c6 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.497227121</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c12 */</font>
	      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp4<font face='Lucida Console'>)</font> <font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp7 <font color='#5555FF'>-</font> tmp7;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.742091575</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>  <font color='#009900'>/* c2+c14 */</font>
         <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.546621957</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c4+c8 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.908479156</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>  <font color='#009900'>/* c8-c14 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.103948774</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c2-c4 */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.573898926</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>  <font color='#009900'>/* c2 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6 <font color='#5555FF'>-</font> tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.076671805</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>  <font color='#009900'>/* c8 */</font>
	 <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.899492312</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* (c6+c12)/2 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> tmp13 <font color='#5555FF'>+</font> tmp15 <font color='#5555FF'>+</font> tmp16,
		    <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.393487498</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                         <font color='#009900'>/* c5 */</font>
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp14 <font color='#5555FF'>-</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.530307725</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#009900'>/* c3 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp13 <font color='#5555FF'>-</font> tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.945782187</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c9 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.393487498</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c5 */</font>
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.600246161</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c1 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.530307725</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c3 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.654463974</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c11 */</font>
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.541301207</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>                 <font color='#009900'>/* c7-c11 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.584525538</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>                 <font color='#009900'>/* c3-c9 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.934788705</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp4 <font color='#5555FF'>+</font> tmp12;   <font color='#009900'>/* c1+c13 */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.404480980</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>               <font color='#009900'>/* -(c1-c7) */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.476089912</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>                 <font color='#009900'>/* c3+c9 */</font>
	   <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.989006518</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp4 <font color='#5555FF'>-</font> tmp12;   <font color='#009900'>/* c11+c13 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp2, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp3, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 16x16 sample block.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_16x16'></a>jpeg_fdct_16x16</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15, tmp16, tmp17;
  DCTELEM workspace[DCTSIZE2];
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  DCTELEM <font color='#5555FF'>*</font>wsptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/32). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>;;<font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>15</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>14</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>13</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>12</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp6 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp7 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp7;
    tmp14 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp7;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp6;
    tmp15 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp6;
    tmp12 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp5;
    tmp16 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp5;
    tmp13 <font color='#5555FF'>=</font> tmp3 <font color='#5555FF'>+</font> tmp4;
    tmp17 <font color='#5555FF'>=</font> tmp3 <font color='#5555FF'>-</font> tmp4;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>15</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>14</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>13</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>12</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp6 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp7 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font> <font color='#979000'>16</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#009900'>/* c4[16] = c2[8] */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp12, FIX_0_541196100<font face='Lucida Console'>)</font>,   <font color='#009900'>/* c12[16] = c6[8] */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp17 <font color='#5555FF'>-</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.275899379</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>   <font color='#009900'>/* c14[16] = c7[8] */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>-</font> tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.387039845</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c2[16] = c1[8] */</font>

    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.451774982</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c6+c14 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.172734804</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c2+c10 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.211164243</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c2-c6 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp17, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.061594338</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c10+c14 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6 <font color='#5555FF'>-</font> tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c13 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c5 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>+</font> tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c11 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.093201867</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c7 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4 <font color='#5555FF'>-</font> tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.897167586</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c9 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.138617169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c15 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6 <font color='#5555FF'>-</font> tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.407403738</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c1 */</font>
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>       <font color='#009900'>/* -c11 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4 <font color='#5555FF'>+</font> tmp6, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* -c5 */</font>
    tmp16 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>       <font color='#009900'>/* -c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c13 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.286341144</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>                <font color='#009900'>/* c7+c5+c3-c1 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.779653625</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c15+c13-c11+c9 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.071888074</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c9-c3-c15+c11 */</font>
	     <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.663905119</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c7+c13+c1-c5 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> tmp16 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.125726048</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c7+c5+c15-c3 */</font>
	     <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.227391138</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c9-c11+c1-c13 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> tmp16 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.065388962</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c15+c3+c11-c7 */</font>
	     <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.167985692</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c1+c13+c5-c9 */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> DCTSIZE<font face='Lucida Console'>)</font> <b>{</b>
      <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> DCTSIZE <font color='#5555FF'>*</font> <font color='#979000'>2</font><font face='Lucida Console'>)</font>
	<font color='#0000FF'>break</font>;			<font color='#009900'>/* Done. */</font>
      dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;	<font color='#009900'>/* advance pointer to next row */</font>
    <b>}</b> <font color='#0000FF'>else</font>
      dataptr <font color='#5555FF'>=</font> workspace;	<font color='#009900'>/* switch pointer to extended workspace */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/16)**2 = 1/2**2.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp6 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp7 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp7;
    tmp14 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp7;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp6;
    tmp15 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp6;
    tmp12 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp5;
    tmp16 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp5;
    tmp13 <font color='#5555FF'>=</font> tmp3 <font color='#5555FF'>+</font> tmp4;
    tmp17 <font color='#5555FF'>=</font> tmp3 <font color='#5555FF'>-</font> tmp4;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp6 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp7 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13, PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#009900'>/* c4[16] = c2[8] */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp12, FIX_0_541196100<font face='Lucida Console'>)</font>,   <font color='#009900'>/* c12[16] = c6[8] */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp17 <font color='#5555FF'>-</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.275899379</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>   <font color='#009900'>/* c14[16] = c7[8] */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>-</font> tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.387039845</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c2[16] = c1[8] */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.451774982</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c6+c14 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.172734804</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c2+10 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.211164243</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c2-c6 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp17, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.061594338</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c10+c14 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6 <font color='#5555FF'>-</font> tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c13 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c5 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>+</font> tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c11 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.093201867</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c7 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4 <font color='#5555FF'>-</font> tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.897167586</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c9 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.138617169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c15 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6 <font color='#5555FF'>-</font> tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.407403738</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c1 */</font>
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>       <font color='#009900'>/* -c11 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4 <font color='#5555FF'>+</font> tmp6, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* -c5 */</font>
    tmp16 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>       <font color='#009900'>/* -c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c13 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.286341144</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>                <font color='#009900'>/* c7+c5+c3-c1 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.779653625</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c15+c13-c11+c9 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.071888074</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c9-c3-c15+c11 */</font>
	     <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.663905119</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c7+c13+c1-c5 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> tmp16 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.125726048</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c7+c5+c15-c3 */</font>
	     <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.227391138</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c9-c11+c1-c13 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> tmp16 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.065388962</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c15+c3+c11-c7 */</font>
	     <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.167985692</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c1+c13+c5-c9 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp13, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 16x8 sample block.
 *
 * 16-point FDCT in pass 1 (rows), 8-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_16x8'></a>jpeg_fdct_16x8</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15, tmp16, tmp17;
  INT32 z1;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* 16-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/32). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> DCTSIZE; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>15</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>14</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>13</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>12</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp6 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp7 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp7;
    tmp14 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp7;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp6;
    tmp15 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp6;
    tmp12 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp5;
    tmp16 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp5;
    tmp13 <font color='#5555FF'>=</font> tmp3 <font color='#5555FF'>+</font> tmp4;
    tmp17 <font color='#5555FF'>=</font> tmp3 <font color='#5555FF'>-</font> tmp4;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>15</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>14</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>13</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>12</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp6 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp7 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font> <font color='#979000'>16</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#009900'>/* c4[16] = c2[8] */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp12, FIX_0_541196100<font face='Lucida Console'>)</font>,   <font color='#009900'>/* c12[16] = c6[8] */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp17 <font color='#5555FF'>-</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.275899379</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>   <font color='#009900'>/* c14[16] = c7[8] */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>-</font> tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.387039845</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c2[16] = c1[8] */</font>

    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.451774982</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c6+c14 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.172734804</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c2+c10 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.211164243</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c2-c6 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp17, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.061594338</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c10+c14 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6 <font color='#5555FF'>-</font> tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c13 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c5 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>+</font> tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c11 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.093201867</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c7 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4 <font color='#5555FF'>-</font> tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.897167586</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c9 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.138617169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c15 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6 <font color='#5555FF'>-</font> tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.407403738</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c1 */</font>
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>       <font color='#009900'>/* -c11 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4 <font color='#5555FF'>+</font> tmp6, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* -c5 */</font>
    tmp16 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>       <font color='#009900'>/* -c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c13 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.286341144</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>                <font color='#009900'>/* c7+c5+c3-c1 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.779653625</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c15+c13-c11+c9 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.071888074</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c9-c3-c15+c11 */</font>
	     <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.663905119</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c7+c13+c1-c5 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> tmp16 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.125726048</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c7+c5+c15-c3 */</font>
	     <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.227391138</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c9-c11+c1-c13 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> tmp16 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.065388962</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c15+c3+c11-c7 */</font>
	     <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.167985692</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c1+c13+c5-c9 */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by 8/16 = 1/2.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part per LL&amp;M figure 1 --- note that published figure is faulty;
     * rotator "sqrt(2)*c1" should be "sqrt(2)*c6".
     */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11, PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, FIX_0_541196100<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, FIX_0_765366865<font face='Lucida Console'>)</font>,
					   CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, FIX_1_847759065<font face='Lucida Console'>)</font>,
					   CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part per figure 8 --- note paper omits factor of sqrt(2).
     * 8-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/16).
     * i0..i3 in the paper are tmp0..tmp3 here.
     */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/*  c3 */</font>

    tmp0  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0,    FIX_1_501321110<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3-c5-c7 */</font>
    tmp1  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1,    FIX_3_072711026<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3+c5-c7 */</font>
    tmp2  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2,    FIX_2_053119869<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3-c5+c7 */</font>
    tmp3  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3,    FIX_0_298631336<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1+c3+c5-c7 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c7-c3 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1-c3 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c5-c3 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c3-c5 */</font>

    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp12,
					   CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp13,
					   CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12,
					   CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp13,
					   CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 14x7 sample block.
 *
 * 14-point FDCT in pass 1 (rows), 7-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_14x7'></a>jpeg_fdct_14x7</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5, tmp6;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15, tmp16;
  INT32 z1, z2, z3;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Zero bottom row of output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font><font color='#5555FF'>&amp;</font>data[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* 14-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/28). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>7</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>13</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>12</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp6 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp6;
    tmp14 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp6;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp5;
    tmp15 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp5;
    tmp12 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp4;
    tmp16 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp4;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>13</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>12</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp6 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font> <font color='#979000'>14</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.274162392</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#009900'>/* c4 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.314692123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* c12 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881747734</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c8 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>+</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.105676686</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>

    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.273079590</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c2-c6 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.613604268</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c10 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.719280954</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c6+c10 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.378756276</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp11 <font color='#5555FF'>=</font> tmp5 <font color='#5555FF'>-</font> tmp4;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp6<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.158341681</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* -c13 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.405321284</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;            <font color='#009900'>/* c1 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.197448846</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>     <font color='#009900'>/* c5 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4 <font color='#5555FF'>+</font> tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.752406978</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c9 */</font>
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.373959773</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c3+c5-c13 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.119999435</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c1+c11-c9 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.334852607</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>     <font color='#009900'>/* c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>-</font> tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.467085129</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c11 */</font>
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.424103948</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c3-c9-c13 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>3.069855259</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c1+c5+c11 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>+</font> tmp6 <font color='#5555FF'>-</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.126980169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,    <font color='#009900'>/* c3+c5-c1 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/14)*(8/7) = 32/49, which we
   * partially fold into the constant multipliers and final shifting:
   * 7-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/14) * 64/49.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];

    tmp10 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp11 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp12 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];

    z1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306122449</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* 64/49 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp3;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp3;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp3;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.461784020</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                <font color='#009900'>/* (c2+c6-c4)/2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.202428084</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* (c2+c4-c6)/2 */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.411026446</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c6 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2 <font color='#5555FF'>+</font> z3, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.151670509</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c4 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.923568041</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c2+c6-c4 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.221765677</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* (c3+c1-c5)/2 */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.222383464</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* (c3+c5-c1)/2 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp2;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp12, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.800824523</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c1 */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp2;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.801442310</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp3;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.443531355</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3+c1-c5 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp2, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 12x6 sample block.
 *
 * 12-point FDCT in pass 1 (rows), 6-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_12x6'></a>jpeg_fdct_12x6</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Zero 2 bottom rows of output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font><font color='#5555FF'>&amp;</font>data[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE <font color='#5555FF'>*</font> <font color='#979000'>2</font><font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* 12-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/24). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>6</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp5;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp5;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp4;
    tmp14 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp4;
    tmp12 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp3;
    tmp15 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp3;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>11</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>10</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font> <font color='#979000'>12</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp14 <font color='#5555FF'>-</font> tmp15<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c4 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>-</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp4, FIX_0_541196100<font face='Lucida Console'>)</font>;    <font color='#009900'>/* c9 */</font>
    tmp14 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, FIX_0_765366865<font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3-c9 */</font>
    tmp15 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, FIX_1_847759065<font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3+c9 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.121971054</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.860918669</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c7 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>+</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.580774953</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c5+c7-c1 */</font>
	    <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.184591911</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c11 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.184591911</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c11 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp15 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.339493912</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c1+c5-c11 */</font>
	    <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.860918669</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c7 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp14 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.725788011</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c1+c11-c7 */</font>
	    <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.121971054</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c5 */</font>
    tmp11 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c3 */</font>
	    <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp5, FIX_0_541196100<font face='Lucida Console'>)</font>;  <font color='#009900'>/* c9 */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/12)*(8/6) = 8/9, which we
   * partially fold into the constant multipliers and final shifting:
   * 6-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/12) * 16/9.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp11 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.177324216</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,                 <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.257078722</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c4 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.650711829</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c5 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,   <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,    <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,   <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 10x5 sample block.
 *
 * 10-point FDCT in pass 1 (rows), 5-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_10x5'></a>jpeg_fdct_10x5</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Zero 3 bottom rows of output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font><font color='#5555FF'>&amp;</font>data[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE <font color='#5555FF'>*</font> <font color='#979000'>3</font><font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* 10-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/20). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>5</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp4;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp4;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    tmp14 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>9</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>8</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font> <font color='#979000'>10</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp12;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.144122806</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* c4 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.437016024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c8 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c2-c6 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c2+c6 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp4;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.396802247</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>          <font color='#009900'>/* c1 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.260073511</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font>   <font color='#009900'>/* c3 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.642039522</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>          <font color='#009900'>/* c7 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.221231742</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,           <font color='#009900'>/* c9 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.951056516</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>     <font color='#009900'>/* (c3+c7)/2 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.587785252</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* (c1-c9)/2 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.309016994</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>   <font color='#009900'>/* (c3-c7)/2 */</font>
	    <font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS <font color='#5555FF'>-</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp2;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/10)*(8/5) = 32/25, which we
   * fold into the constant multipliers:
   * 5-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/10) * 32/25.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp1;
    tmp11 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp1;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.28</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* 32/25 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.011928851</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* (c2+c4)/2 */</font>
    tmp10 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.452548340</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* (c2-c4)/2 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.064004961</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c3 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.657591230</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c1-c3 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.785601151</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c1+c3 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on an 8x4 sample block.
 *
 * 8-point FDCT in pass 1 (rows), 4-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_8x4'></a>jpeg_fdct_8x4</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3;
  INT32 tmp10, tmp11, tmp12, tmp13;
  INT32 z1;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Zero 4 bottom rows of output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font><font color='#5555FF'>&amp;</font>data[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE <font color='#5555FF'>*</font> <font color='#979000'>4</font><font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* We must also scale the output by 8/4 = 2, which we add here. */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>4</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part per LL&amp;M figure 1 --- note that published figure is faulty;
     * rotator "sqrt(2)*c1" should be "sqrt(2)*c6".
     */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>-</font> <font color='#979000'>8</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, FIX_0_541196100<font face='Lucida Console'>)</font>;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, FIX_0_765366865<font face='Lucida Console'>)</font>,
				       CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, FIX_1_847759065<font face='Lucida Console'>)</font>,
				       CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part per figure 8 --- note paper omits factor of sqrt(2).
     * 8-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/16).
     * i0..i3 in the paper are tmp0..tmp3 here.
     */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/*  c3 */</font>
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    tmp0  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0,    FIX_1_501321110<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3-c5-c7 */</font>
    tmp1  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1,    FIX_3_072711026<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3+c5-c7 */</font>
    tmp2  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2,    FIX_2_053119869<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3-c5+c7 */</font>
    tmp3  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3,    FIX_0_298631336<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1+c3+c5-c7 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c7-c3 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1-c3 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c5-c3 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c3-c5 */</font>

    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * 4-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/16).
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];

    tmp10 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp11 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1, PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, FIX_0_541196100<font face='Lucida Console'>)</font>;   <font color='#009900'>/* c6 */</font>
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, FIX_0_765366865<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2-c6 */</font>
		  CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, FIX_1_847759065<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2+c6 */</font>
		  CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 6x3 sample block.
 *
 * 6-point FDCT in pass 1 (rows), 3-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_6x3'></a>jpeg_fdct_6x3</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2;
  INT32 tmp10, tmp11, tmp12;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* We scale the results further by 2 as part of output adaption */</font>
  <font color='#009900'>/* scaling for different DCT size. */</font>
  <font color='#009900'>/* 6-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/12). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>3</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>-</font> <font color='#979000'>6</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,                 <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c4 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,     <font color='#009900'>/* c5 */</font>
		    CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>-</font> tmp1<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/6)*(8/3) = 32/9, which we partially
   * fold into the constant multipliers (other part was done in pass 1):
   * 3-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/6) * 16/9.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>6</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];

    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.257078722</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.177324216</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,               <font color='#009900'>/* c1 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 4x2 sample block.
 *
 * 4-point FDCT in pass 1 (rows), 2-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_4x2'></a>jpeg_fdct_4x2</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1;
  INT32 tmp10, tmp11;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* We must also scale the output by (8/4)*(8/2) = 2**3, which we add here. */</font>
  <font color='#009900'>/* 4-point FDCT kernel, */</font>
  <font color='#009900'>/* cK represents sqrt(2) * cos(K*pi/16) [refers to 8-point FDCT]. */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>-</font> <font color='#979000'>4</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, FIX_0_541196100<font face='Lucida Console'>)</font>;       <font color='#009900'>/* c6 */</font>
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>4</font><font face='Lucida Console'>)</font>;

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, FIX_0_765366865<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2-c6 */</font>
		  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, FIX_1_847759065<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2+c6 */</font>
		  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>4</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1, PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 2x1 sample block.
 *
 * 2-point FDCT in pass 1 (rows), 1-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_2x1'></a>jpeg_fdct_2x1</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1;
  JSAMPROW elemptr;

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  elemptr <font color='#5555FF'>=</font> sample_data[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> start_col;

  tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
  tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* We leave the results scaled up by an overall factor of 8.
   * We must also scale the output by (8/2)*(8/1) = 2**5.
   */</font>

  <font color='#009900'>/* Even part */</font>
  <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
  data[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>-</font> <font color='#979000'>2</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>5</font><font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Odd part */</font>
  data[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>5</font><font face='Lucida Console'>)</font>;
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on an 8x16 sample block.
 *
 * 8-point FDCT in pass 1 (rows), 16-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_8x16'></a>jpeg_fdct_8x16</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15, tmp16, tmp17;
  INT32 z1;
  DCTELEM workspace[DCTSIZE2];
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  DCTELEM <font color='#5555FF'>*</font>wsptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>;;<font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part per LL&amp;M figure 1 --- note that published figure is faulty;
     * rotator "sqrt(2)*c1" should be "sqrt(2)*c6".
     */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>-</font> <font color='#979000'>8</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, FIX_0_541196100<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, FIX_0_765366865<font face='Lucida Console'>)</font>,
				   CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, FIX_1_847759065<font face='Lucida Console'>)</font>,
				   CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part per figure 8 --- note paper omits factor of sqrt(2).
     * 8-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/16).
     * i0..i3 in the paper are tmp0..tmp3 here.
     */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/*  c3 */</font>

    tmp0  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0,    FIX_1_501321110<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3-c5-c7 */</font>
    tmp1  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1,    FIX_3_072711026<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3+c5-c7 */</font>
    tmp2  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2,    FIX_2_053119869<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3-c5+c7 */</font>
    tmp3  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3,    FIX_0_298631336<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1+c3+c5-c7 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c7-c3 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1-c3 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c5-c3 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c3-c5 */</font>

    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> DCTSIZE<font face='Lucida Console'>)</font> <b>{</b>
      <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> DCTSIZE <font color='#5555FF'>*</font> <font color='#979000'>2</font><font face='Lucida Console'>)</font>
	<font color='#0000FF'>break</font>;			<font color='#009900'>/* Done. */</font>
      dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;	<font color='#009900'>/* advance pointer to next row */</font>
    <b>}</b> <font color='#0000FF'>else</font>
      dataptr <font color='#5555FF'>=</font> workspace;	<font color='#009900'>/* switch pointer to extended workspace */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by 8/16 = 1/2.
   * 16-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/32).
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE<font color='#5555FF'>-</font><font color='#979000'>1</font>; ctr <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp6 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp7 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp7;
    tmp14 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp7;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp6;
    tmp15 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp6;
    tmp12 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp5;
    tmp16 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp5;
    tmp13 <font color='#5555FF'>=</font> tmp3 <font color='#5555FF'>+</font> tmp4;
    tmp17 <font color='#5555FF'>=</font> tmp3 <font color='#5555FF'>-</font> tmp4;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp6 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp7 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13, PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#009900'>/* c4[16] = c2[8] */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp12, FIX_0_541196100<font face='Lucida Console'>)</font>,   <font color='#009900'>/* c12[16] = c6[8] */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp17 <font color='#5555FF'>-</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.275899379</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>   <font color='#009900'>/* c14[16] = c7[8] */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>-</font> tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.387039845</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c2[16] = c1[8] */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.451774982</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c6+c14 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.172734804</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c2+c10 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.211164243</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c2-c6 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp17, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.061594338</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c10+c14 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6 <font color='#5555FF'>-</font> tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c13 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c5 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>+</font> tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c11 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.093201867</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c7 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4 <font color='#5555FF'>-</font> tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.897167586</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c9 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.138617169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>         <font color='#009900'>/* c15 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6 <font color='#5555FF'>-</font> tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.407403738</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c1 */</font>
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>       <font color='#009900'>/* -c11 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4 <font color='#5555FF'>+</font> tmp6, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* -c5 */</font>
    tmp16 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>       <font color='#009900'>/* -c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c13 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.286341144</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>                <font color='#009900'>/* c7+c5+c3-c1 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp7, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.779653625</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c15+c13-c11+c9 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.071888074</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c9-c3-c15+c11 */</font>
	     <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.663905119</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c7+c13+c1-c5 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> tmp16 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.125726048</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c7+c5+c15-c3 */</font>
	     <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.227391138</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c9-c11+c1-c13 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> tmp16 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.065388962</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c15+c3+c11-c7 */</font>
	     <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.167985692</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c1+c13+c5-c9 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp13, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 7x14 sample block.
 *
 * 7-point FDCT in pass 1 (rows), 14-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_7x14'></a>jpeg_fdct_7x14</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5, tmp6;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15, tmp16;
  INT32 z1, z2, z3;
  DCTELEM workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>];
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  DCTELEM <font color='#5555FF'>*</font>wsptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* 7-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/14). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>;;<font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font> <font color='#979000'>7</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp3;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp3;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp3;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.353553391</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                <font color='#009900'>/* (c2+c6-c4)/2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.920609002</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* (c2+c4-c6)/2 */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.314692123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c6 */</font>
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2 <font color='#5555FF'>+</font> z3, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881747734</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c4 */</font>
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c2+c6-c4 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.935414347</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* (c3+c1-c5)/2 */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.170262339</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* (c3+c5-c1)/2 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp2;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp12, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.378756276</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c1 */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp2;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.613604268</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp3;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.870828693</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3+c1-c5 */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> DCTSIZE<font face='Lucida Console'>)</font> <b>{</b>
      <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>14</font><font face='Lucida Console'>)</font>
	<font color='#0000FF'>break</font>;			<font color='#009900'>/* Done. */</font>
      dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;	<font color='#009900'>/* advance pointer to next row */</font>
    <b>}</b> <font color='#0000FF'>else</font>
      dataptr <font color='#5555FF'>=</font> workspace;	<font color='#009900'>/* switch pointer to extended workspace */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/7)*(8/14) = 32/49, which we
   * fold into the constant multipliers:
   * 14-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/28) * 32/49.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>7</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp13 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp6 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp6;
    tmp14 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp6;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp5;
    tmp15 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp5;
    tmp12 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp4;
    tmp16 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp4;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp6 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13,
		       <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.653061224</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,                 <font color='#009900'>/* 32/49 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.832106052</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#009900'>/* c4 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.205513223</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* c12 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.575835255</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c8 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>+</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.722074570</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.178337691</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c2-c6 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.400721155</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c10 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.122795725</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>   <font color='#009900'>/* c6+c10 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp16, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.900412262</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,        <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp11 <font color='#5555FF'>=</font> tmp5 <font color='#5555FF'>-</font> tmp4;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp6,
		       <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.653061224</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,                 <font color='#009900'>/* 32/49 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp3  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3 , <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.653061224</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;            <font color='#009900'>/* 32/49 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.103406812</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* -c13 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.917760839</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;            <font color='#009900'>/* c1 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.782007410</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>     <font color='#009900'>/* c5 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4 <font color='#5555FF'>+</font> tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.491367823</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c9 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.550341076</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c3+c5-c13 */</font>
	      <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.731428202</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c1+c11-c9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.871740478</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>     <font color='#009900'>/* c3 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5 <font color='#5555FF'>-</font> tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.305035186</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c11 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.276965844</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c3-c9-c13 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.004803435</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c1+c5+c11 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp3
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.735987049</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>          <font color='#009900'>/* c3+c5-c1 */</font>
	      <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp6, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.082925825</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c9-c11-c13 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 6x12 sample block.
 *
 * 6-point FDCT in pass 1 (rows), 12-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_6x12'></a>jpeg_fdct_6x12</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15;
  DCTELEM workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>];
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  DCTELEM <font color='#5555FF'>*</font>wsptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* 6-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/12). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>;;<font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>-</font> <font color='#979000'>6</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,                 <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c4 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,     <font color='#009900'>/* c5 */</font>
		    CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>-</font> tmp1<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> DCTSIZE<font face='Lucida Console'>)</font> <b>{</b>
      <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>12</font><font face='Lucida Console'>)</font>
	<font color='#0000FF'>break</font>;			<font color='#009900'>/* Done. */</font>
      dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;	<font color='#009900'>/* advance pointer to next row */</font>
    <b>}</b> <font color='#0000FF'>else</font>
      dataptr <font color='#5555FF'>=</font> workspace;	<font color='#009900'>/* switch pointer to extended workspace */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/6)*(8/12) = 8/9, which we
   * fold into the constant multipliers:
   * 12-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/24) * 8/9.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>6</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp5;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp5;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp4;
    tmp14 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp4;
    tmp12 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp3;
    tmp15 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp3;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp5 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.888888889</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* 8/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp14 <font color='#5555FF'>-</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.888888889</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* 8/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.088662108</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c4 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14 <font color='#5555FF'>-</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.888888889</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>        <font color='#009900'>/* 8/9 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.214244803</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.481063200</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c9 */</font>
    tmp14 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.680326102</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c3-c9 */</font>
    tmp15 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.642452502</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c3+c9 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.997307603</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.765261039</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c7 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>+</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.516244403</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c5+c7-c1 */</font>
	    <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.164081699</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c11 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.164081699</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c11 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp15 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.079550144</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c1+c5-c11 */</font>
	    <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.765261039</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c7 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp14 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.645144899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c1+c11-c7 */</font>
	    <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.997307603</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c5 */</font>
    tmp11 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.161389302</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#009900'>/* c3 */</font>
	    <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp5, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.481063200</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c9 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp13, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 5x10 sample block.
 *
 * 5-point FDCT in pass 1 (rows), 10-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_5x10'></a>jpeg_fdct_5x10</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4;
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14;
  DCTELEM workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>];
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  DCTELEM <font color='#5555FF'>*</font>wsptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* 5-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/10). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>;;<font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp1;
    tmp11 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp1;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>-</font> <font color='#979000'>5</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.790569415</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* (c2+c4)/2 */</font>
    tmp10 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.353553391</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* (c2-c4)/2 */</font>
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c3 */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c1-c3 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c1+c3 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> DCTSIZE<font face='Lucida Console'>)</font> <b>{</b>
      <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>10</font><font face='Lucida Console'>)</font>
	<font color='#0000FF'>break</font>;			<font color='#009900'>/* Done. */</font>
      dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;	<font color='#009900'>/* advance pointer to next row */</font>
    <b>}</b> <font color='#0000FF'>else</font>
      dataptr <font color='#5555FF'>=</font> workspace;	<font color='#009900'>/* switch pointer to extended workspace */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/5)*(8/10) = 32/25, which we
   * fold into the constant multipliers:
   * 10-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/20) * 32/25.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>5</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp12 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp4;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp4;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    tmp14 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp4 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.28</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* 32/25 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp12;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.464477191</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* c4 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.559380511</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c8 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.064004961</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.657591230</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c2-c6 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.785601151</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* c2+c6 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp4;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.28</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,  <font color='#009900'>/* 32/25 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.28</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                     <font color='#009900'>/* 32/25 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.787906876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>          <font color='#009900'>/* c1 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.612894094</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font>   <font color='#009900'>/* c3 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.821810588</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>          <font color='#009900'>/* c7 */</font>
	      <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.283176630</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,           <font color='#009900'>/* c9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.217352341</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>     <font color='#009900'>/* (c3+c7)/2 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.752365123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* (c1-c9)/2 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.395541753</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>   <font color='#009900'>/* (c3-c7)/2 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.64</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp2;            <font color='#009900'>/* 16/25 */</font>
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 4x8 sample block.
 *
 * 4-point FDCT in pass 1 (rows), 8-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_4x8'></a>jpeg_fdct_4x8</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3;
  INT32 tmp10, tmp11, tmp12, tmp13;
  INT32 z1;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* We must also scale the output by 8/4 = 2, which we add here. */</font>
  <font color='#009900'>/* 4-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/16). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> DCTSIZE; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>-</font> <font color='#979000'>4</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, FIX_0_541196100<font face='Lucida Console'>)</font>;       <font color='#009900'>/* c6 */</font>
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>2</font><font face='Lucida Console'>)</font>;

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, FIX_0_765366865<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2-c6 */</font>
		  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, FIX_1_847759065<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2+c6 */</font>
		  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>4</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part per LL&amp;M figure 1 --- note that published figure is faulty;
     * rotator "sqrt(2)*c1" should be "sqrt(2)*c6".
     */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp3 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11, PASS1_BITS<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, FIX_0_541196100<font face='Lucida Console'>)</font>;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, FIX_0_765366865<font face='Lucida Console'>)</font>, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, FIX_1_847759065<font face='Lucida Console'>)</font>, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part per figure 8 --- note paper omits factor of sqrt(2).
     * 8-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/16).
     * i0..i3 in the paper are tmp0..tmp3 here.
     */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp13, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/*  c3 */</font>
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    tmp0  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0,    FIX_1_501321110<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3-c5-c7 */</font>
    tmp1  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1,    FIX_3_072711026<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3+c5-c7 */</font>
    tmp2  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2,    FIX_2_053119869<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c1+c3-c5+c7 */</font>
    tmp3  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3,    FIX_0_298631336<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1+c3+c5-c7 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c7-c3 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1-c3 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>;    <font color='#009900'>/*  c5-c3 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c3-c5 */</font>

    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp3 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 3x6 sample block.
 *
 * 3-point FDCT in pass 1 (rows), 6-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_3x6'></a>jpeg_fdct_3x6</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2;
  INT32 tmp10, tmp11, tmp12;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>
  <font color='#009900'>/* We scale the results further by 2 as part of output adaption */</font>
  <font color='#009900'>/* scaling for different DCT size. */</font>
  <font color='#009900'>/* 3-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/6). */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>6</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;

    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>-</font> <font color='#979000'>3</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    dataptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,               <font color='#009900'>/* c1 */</font>
	      CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We remove the PASS1_BITS scaling, but leave the results scaled up
   * by an overall factor of 8.
   * We must also scale the output by (8/6)*(8/3) = 32/9, which we partially
   * fold into the constant multipliers (other part was done in pass 1):
   * 6-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/12) * 16/9.
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>3</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp11 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>];
    tmp2 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,         <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.177324216</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,                 <font color='#009900'>/* c2 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.257078722</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c4 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.650711829</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c5 */</font>

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,   <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1 <font color='#5555FF'>-</font> tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,    <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.777777778</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>,   <font color='#009900'>/* 16/9 */</font>
	      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 2x4 sample block.
 *
 * 2-point FDCT in pass 1 (rows), 4-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_2x4'></a>jpeg_fdct_2x4</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1;
  INT32 tmp10, tmp11;
  DCTELEM <font color='#5555FF'>*</font>dataptr;
  JSAMPROW elemptr;
  <font color='#0000FF'><u>int</u></font> ctr;
  SHIFT_TEMPS

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Pass 1: process rows. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true DCT. */</font>
  <font color='#009900'>/* We must also scale the output by (8/2)*(8/4) = 2**3, which we add here. */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>4</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    elemptr <font color='#5555FF'>=</font> sample_data[ctr] <font color='#5555FF'>+</font> start_col;

    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>elemptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
    dataptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>-</font> <font color='#979000'>2</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>3</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    dataptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>3</font><font face='Lucida Console'>)</font>;

    dataptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>

  <font color='#009900'>/* Pass 2: process columns.
   * We leave the results scaled up by an overall factor of 8.
   * 4-point FDCT kernel,
   * cK represents sqrt(2) * cos(K*pi/16) [refers to 8-point FDCT].
   */</font>

  dataptr <font color='#5555FF'>=</font> data;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp1 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>+</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];

    tmp10 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>];
    tmp11 <font color='#5555FF'>=</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>-</font> dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>];

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp11, FIX_0_541196100<font face='Lucida Console'>)</font>;       <font color='#009900'>/* c6 */</font>
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, FIX_0_765366865<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2-c6 */</font>
		  CONST_BITS<font face='Lucida Console'>)</font>;
    dataptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font>
      <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, FIX_1_847759065<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2+c6 */</font>
		  CONST_BITS<font face='Lucida Console'>)</font>;

    dataptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointer to next column */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform the forward DCT on a 1x2 sample block.
 *
 * 1-point FDCT in pass 1 (rows), 2-point in pass 2 (columns).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_fdct_1x2'></a>jpeg_fdct_1x2</b> <font face='Lucida Console'>(</font>DCTELEM <font color='#5555FF'>*</font> data, JSAMPARRAY sample_data, JDIMENSION start_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1;

  <font color='#009900'>/* Pre-zero output coefficient block. */</font>
  <font color='#BB00BB'>MEMZERO</font><font face='Lucida Console'>(</font>data, <font color='#BB00BB'>SIZEOF</font><font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> DCTSIZE2<font face='Lucida Console'>)</font>;

  tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>sample_data[<font color='#979000'>0</font>][start_col]<font face='Lucida Console'>)</font>;
  tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>GETJSAMPLE</font><font face='Lucida Console'>(</font>sample_data[<font color='#979000'>1</font>][start_col]<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* We leave the results scaled up by an overall factor of 8.
   * We must also scale the output by (8/1)*(8/2) = 2**5.
   */</font>

  <font color='#009900'>/* Even part */</font>
  <font color='#009900'>/* Apply unsigned-&gt;signed conversion */</font>
  data[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1 <font color='#5555FF'>-</font> <font color='#979000'>2</font> <font color='#5555FF'>*</font> CENTERJSAMPLE<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>5</font><font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Odd part */</font>
  data[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>DCTELEM<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>5</font><font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>#endif</font> <font color='#009900'>/* DCT_SCALING_SUPPORTED */</font>
<font color='#0000FF'>#endif</font> <font color='#009900'>/* DCT_ISLOW_SUPPORTED */</font>

</pre></body></html>